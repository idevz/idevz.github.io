<!DOCTYPE html>
<html lang='en'><head>
  <meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='description' content='Top 不止有 top（启动默认选项） 全局默认值    选项 - 意义 默认值     A - Alt display Off (full-screen)   * d - Delay time 1.5 seconds   * H - Threads mode Off (summarize as tasks)   I - Irix mode On (no, `solaris&rsquo; smp)   * p - PID monitoring Off (show all processes)   * s - Secure mode Off (unsecured)   B - Bold enable On (yes, bold globally)    概要区默认值    选项 - 意义 默认值     l - Load Avg/Uptime On (thus program name)   t - Task/Cpu states On (1&#43;1 lines, see `1&rsquo;)   m - Mem/Swap usage On (2 lines worth)   1 - Single Cpu Off (thus multiple cpus)    任务区默认值    选项 - 意义 默认值     b - Bold hilite Off (use `reverse&rsquo;)   * c - Command line Off (name, not cmdline)   * i - Idle tasks On (show all tasks)   J - Num align right On (not left justify)   j - Str align right Off (not right justify)   R - Reverse sort On (pids high-to-low)   * S - Cumulative time Off (no, dead children)   * u - User filter Off (show euid only)   * U - User filter Off (show any uid)   V - Forest view On (show as branches)   x - Column hilite Off (no, sort field)   y - Row hilite On (yes, running tasks)   z - color/mono On (show colors)    不一样的启动 ❯ top -h z@master1 procps-ng version 3.'>
<meta name='theme-color' content='#ffcd00'>

<meta property='og:title' content='我们应该知道的 Top • 做一个善于思考的学习者'>
<meta property='og:description' content='Top 不止有 top（启动默认选项） 全局默认值    选项 - 意义 默认值     A - Alt display Off (full-screen)   * d - Delay time 1.5 seconds   * H - Threads mode Off (summarize as tasks)   I - Irix mode On (no, `solaris&rsquo; smp)   * p - PID monitoring Off (show all processes)   * s - Secure mode Off (unsecured)   B - Bold enable On (yes, bold globally)    概要区默认值    选项 - 意义 默认值     l - Load Avg/Uptime On (thus program name)   t - Task/Cpu states On (1&#43;1 lines, see `1&rsquo;)   m - Mem/Swap usage On (2 lines worth)   1 - Single Cpu Off (thus multiple cpus)    任务区默认值    选项 - 意义 默认值     b - Bold hilite Off (use `reverse&rsquo;)   * c - Command line Off (name, not cmdline)   * i - Idle tasks On (show all tasks)   J - Num align right On (not left justify)   j - Str align right Off (not right justify)   R - Reverse sort On (pids high-to-low)   * S - Cumulative time Off (no, dead children)   * u - User filter Off (show euid only)   * U - User filter Off (show any uid)   V - Forest view On (show as branches)   x - Column hilite Off (no, sort field)   y - Row hilite On (yes, running tasks)   z - color/mono On (show colors)    不一样的启动 ❯ top -h z@master1 procps-ng version 3.'>
<meta property='og:url' content='http://idevz.github.io/2018/03/%E6%88%91%E4%BB%AC%E5%BA%94%E8%AF%A5%E7%9F%A5%E9%81%93%E7%9A%84-top/'>
<meta property='og:site_name' content='做一个善于思考的学习者'>
<meta property='og:type' content='article'><meta property='article:section' content='tools'><meta property='article:tag' content='top'><meta property='article:published_time' content='2018-03-27T15:08:51&#43;08:00'/><meta property='article:modified_time' content='2018-04-16T08:00:33&#43;08:00'/><meta name='twitter:card' content='summary'>

<meta name="generator" content="Hugo 0.60.0-DEV" />

  <meta name="referrer" content="no-referrer" />
  <title>我们应该知道的 Top • 做一个善于思考的学习者</title>
  <link rel='canonical' href='http://idevz.github.io/2018/03/%E6%88%91%E4%BB%AC%E5%BA%94%E8%AF%A5%E7%9F%A5%E9%81%93%E7%9A%84-top/'>
  
  
  <link rel='icon' href='http://idevz.github.io/favicon.ico'>
<link rel='stylesheet' href='http://idevz.github.io/assets/css/main.6a060eb7.css'><style>
:root{--color-accent:#ffcd00;}
</style>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-71947507-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  

</head><body class='page type-tools'>

  <div class='site'><a class='screen-reader-text' href='#content'>Skip to Content</a><div class='main'><nav id='main-menu' class='menu main-menu' aria-label='Main Menu'>
  <div class='container'>
    
    <ul><li class='item'>
        <a href='http://idevz.github.io/'>idevz.org</a>
      </li><li class='item'>
        <a href='http://idevz.github.io/tech/'>技术</a>
      </li><li class='item'>
        <a href='http://idevz.github.io/tools/'>工具</a>
      </li><li class='item'>
        <a href='http://idevz.github.io/life/'>Life</a>
      </li><li class='item'>
        <a href='http://idevz.github.io/page/about/'>关于</a>
      </li></ul>
  </div>
</nav><div class='header-widgets'>
        <div class='container'></div>
      </div>

      <header id='header' class='header site-header'>
        <div class='container sep-after'>
          <div class='header-info'><p class='site-title title'>做一个善于思考的学习者</p><p class='desc site-desc'>Every Day Create Your History.</p>
          </div>
        </div>
      </header>

      <main id='content'>


<article lang='en' class='entry'>
  <header class='header entry-header'>
  <div class='container sep-after'>
    <div class='header-info'>
      <h1 class='title'>我们应该知道的 Top</h1>
      

    </div>
    <div class='entry-meta'>
  <span class='posted-on'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
  <line x1="16" y1="2" x2="16" y2="6"/>
  <line x1="8" y1="2" x2="8" y2="6"/>
  <line x1="3" y1="10" x2="21" y2="10"/>
  
</svg>
<span class='screen-reader-text'>Posted on </span>
  <time class='entry-date' datetime='2018-03-27T15:08:51&#43;08:00'>2018, Mar 27</time>
</span>

  
  
<span class='reading-time'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <circle cx="12" cy="12" r="10"/>
  <polyline points="12 6 12 12 15 15"/>
  
</svg>
8 mins read
</span>


</div>


  </div>
</header>

  
  
<details class='container entry-toc'>
  <summary class='title'>
    <span>Table of Contents</span>
  </summary>
  <nav id="TableOfContents">
<ul>
<li><a href="#top-不止有-top-启动默认选项">Top 不止有 <code>top</code>（启动默认选项）</a>
<ul>
<li><a href="#全局默认值">全局默认值</a></li>
<li><a href="#概要区默认值">概要区默认值</a></li>
<li><a href="#任务区默认值">任务区默认值</a></li>
<li><a href="#不一样的启动">不一样的启动</a></li>
<li><a href="#交互式命令">交互式命令</a></li>
</ul></li>
<li><a href="#top-统计信息拾遗">Top 统计信息拾遗</a></li>
<li><a href="#top-命令显示字段释义表">top 命令显示字段释义表</a></li>
<li><a href="#top-pids">top pids</a></li>
<li><a href="#difference-between-buffer-and-cache-网站摘录-http-www-answers-com-q-difference-between-buffer-and-cache">Difference between buffer and cache? <a href="http://www.answers.com/Q/Difference_between_buffer_and_cache">网站摘录</a></a>
<ul>
<li><a href="#buffer">Buffer</a></li>
<li><a href="#cache-memory">Cache Memory</a></li>
</ul></li>
</ul>
</nav>
</details>


  <div class='container entry-content'>
  

<h1 id="top-不止有-top-启动默认选项">Top 不止有 <code>top</code>（启动默认选项）</h1>

<h2 id="全局默认值">全局默认值</h2>

<table>
<thead>
<tr>
<th align="center">选项 - 意义</th>
<th align="center">默认值</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">A - Alt display</td>
<td align="center">Off (full-screen)</td>
</tr>

<tr>
<td align="center">* d - Delay time</td>
<td align="center">1.5 seconds</td>
</tr>

<tr>
<td align="center">* H - Threads mode</td>
<td align="center">Off (summarize as tasks)</td>
</tr>

<tr>
<td align="center">I - Irix mode</td>
<td align="center">On  (no, `solaris&rsquo; smp)</td>
</tr>

<tr>
<td align="center">* p - PID monitoring</td>
<td align="center">Off (show all processes)</td>
</tr>

<tr>
<td align="center">* s - Secure mode</td>
<td align="center">Off (unsecured)</td>
</tr>

<tr>
<td align="center">B - Bold enable</td>
<td align="center">On  (yes, bold globally)</td>
</tr>
</tbody>
</table>

<h2 id="概要区默认值">概要区默认值</h2>

<table>
<thead>
<tr>
<th align="center">选项 - 意义</th>
<th align="center">默认值</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">l - Load Avg/Uptime</td>
<td align="center">On  (thus program name)</td>
</tr>

<tr>
<td align="center">t - Task/Cpu states</td>
<td align="center">On  (1+1 lines, see `1&rsquo;)</td>
</tr>

<tr>
<td align="center">m - Mem/Swap usage</td>
<td align="center">On  (2 lines worth)</td>
</tr>

<tr>
<td align="center">1 - Single Cpu</td>
<td align="center">Off (thus multiple cpus)</td>
</tr>
</tbody>
</table>

<h2 id="任务区默认值">任务区默认值</h2>

<table>
<thead>
<tr>
<th align="center">选项 - 意义</th>
<th align="center">默认值</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">b - Bold hilite</td>
<td align="center">Off (use `reverse&rsquo;)</td>
</tr>

<tr>
<td align="center">* c - Command line</td>
<td align="center">Off (name, not cmdline)</td>
</tr>

<tr>
<td align="center">* i - Idle tasks</td>
<td align="center">On  (show all tasks)</td>
</tr>

<tr>
<td align="center">J - Num align right</td>
<td align="center">On  (not left justify)</td>
</tr>

<tr>
<td align="center">j - Str align right</td>
<td align="center">Off (not right justify)</td>
</tr>

<tr>
<td align="center">R - Reverse sort</td>
<td align="center">On  (pids high-to-low)</td>
</tr>

<tr>
<td align="center">* S - Cumulative time</td>
<td align="center">Off (no, dead children)</td>
</tr>

<tr>
<td align="center">* u - User filter</td>
<td align="center">Off (show euid only)</td>
</tr>

<tr>
<td align="center">* U - User filter</td>
<td align="center">Off (show any uid)</td>
</tr>

<tr>
<td align="center">V - Forest view</td>
<td align="center">On  (show as branches)</td>
</tr>

<tr>
<td align="center">x - Column hilite</td>
<td align="center">Off (no, sort field)</td>
</tr>

<tr>
<td align="center">y - Row hilite</td>
<td align="center">On  (yes, running tasks)</td>
</tr>

<tr>
<td align="center">z - color/mono</td>
<td align="center">On  (show colors)</td>
</tr>
</tbody>
</table>

<h2 id="不一样的启动">不一样的启动</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">❯ top -h                                                                                                                     z@master1
  procps-ng version <span style="color:#ae81ff">3</span>.3.10
Usage:
  top -hv | -bcHiOSs -d secs -n max -u|U user -p pid<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span> -o field -w <span style="color:#f92672">[</span>cols<span style="color:#f92672">]</span></code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">top -p <span style="color:#ae81ff">1</span> <span style="color:#75715e">#只监控 init 进程</span>
top -u root <span style="color:#75715e">#只显示 root 用户运行的进程</span></code></pre></div>
<h2 id="交互式命令">交互式命令</h2>

<p><code>top</code> 命令务必强大，完全不止 top 那么简单，交互命令多到爆。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-man" data-lang="man">         4a. Global-Commands
               &lt;Ent/Sp&gt; ?, =, 0,
               A, B, d, E, e, g, h, H, I, k, q, r, s, W, X, Y, Z
         4b. Summary-Area-Commands
               C, l, t, m, 1, 2, 3
         4c. Task-Area-Commands
               Appearance:  b, J, j, x, y, z
               Content:     c, f, F, o, O, S, u, U, V
               Size:        #, i, n
               Sorting:     &lt;, &gt;, f, F, R
         4d. Color-Mapping
               &lt;Ret&gt;, a, B, b, H, M, q, S, T, w, z, 0 - 7
         5b. Commands-for-Windows
               -, _, =, +, A, a, g, G, w
         5c. Scrolling-a-Window
               C, Up, Dn, Left, Right, PgUp, PgDn, Home, End
         5d. Searching-in-a-Window
               L, &amp;</code></pre></div>
<h1 id="top-统计信息拾遗">Top 统计信息拾遗</h1>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">top - <span style="color:#ae81ff">15</span>:42:22 up <span style="color:#ae81ff">2</span> days, <span style="color:#ae81ff">11</span>:21,  <span style="color:#ae81ff">7</span> users,  load average: <span style="color:#ae81ff">0</span>.00, <span style="color:#ae81ff">0</span>.01, <span style="color:#ae81ff">0</span>.05
Threads: <span style="color:#ae81ff">234</span> total,   <span style="color:#ae81ff">1</span> running, <span style="color:#ae81ff">233</span> sleeping,   <span style="color:#ae81ff">0</span> stopped,   <span style="color:#ae81ff">0</span> zombie
%Cpu0  :  <span style="color:#ae81ff">5</span>.0 us,  <span style="color:#ae81ff">0</span>.3 sy,  <span style="color:#ae81ff">0</span>.0 ni, <span style="color:#ae81ff">94</span>.7 id,  <span style="color:#ae81ff">0</span>.0 wa,  <span style="color:#ae81ff">0</span>.0 hi,  <span style="color:#ae81ff">0</span>.0 si,  <span style="color:#ae81ff">0</span>.0 st
%Cpu1  :  <span style="color:#ae81ff">0</span>.0 us,  <span style="color:#ae81ff">0</span>.0 sy,  <span style="color:#ae81ff">0</span>.0 ni,100.0 id,  <span style="color:#ae81ff">0</span>.0 wa,  <span style="color:#ae81ff">0</span>.0 hi,  <span style="color:#ae81ff">0</span>.0 si,  <span style="color:#ae81ff">0</span>.0 st
%Cpu2  :  <span style="color:#ae81ff">4</span>.3 us,  <span style="color:#ae81ff">0</span>.3 sy,  <span style="color:#ae81ff">0</span>.0 ni, <span style="color:#ae81ff">95</span>.3 id,  <span style="color:#ae81ff">0</span>.0 wa,  <span style="color:#ae81ff">0</span>.0 hi,  <span style="color:#ae81ff">0</span>.0 si,  <span style="color:#ae81ff">0</span>.0 st
%Cpu3  :  <span style="color:#ae81ff">0</span>.7 us,  <span style="color:#ae81ff">0</span>.0 sy,  <span style="color:#ae81ff">0</span>.0 ni, <span style="color:#ae81ff">99</span>.3 id,  <span style="color:#ae81ff">0</span>.0 wa,  <span style="color:#ae81ff">0</span>.0 hi,  <span style="color:#ae81ff">0</span>.0 si,  <span style="color:#ae81ff">0</span>.0 st
GiB Mem :    <span style="color:#ae81ff">1</span>.793 total,    <span style="color:#ae81ff">0</span>.601 free,    <span style="color:#ae81ff">0</span>.213 used,    <span style="color:#ae81ff">0</span>.979 buff/cache
GiB Swap:    <span style="color:#ae81ff">1</span>.969 total,    <span style="color:#ae81ff">1</span>.969 free,    <span style="color:#ae81ff">0</span>.000 used.    <span style="color:#ae81ff">1</span>.106 avail Mem

  PID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND
<span style="color:#ae81ff">24756</span> z         <span style="color:#ae81ff">20</span>   <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">252</span>.4m  <span style="color:#ae81ff">62</span>.5m   <span style="color:#ae81ff">2</span>.6m S  <span style="color:#ae81ff">0</span>.0  <span style="color:#ae81ff">3</span>.4   <span style="color:#ae81ff">0</span>:00.09 /tmp/go-build714750418/command-line-arguments/_obj/exe/p
<span style="color:#ae81ff">24757</span> z         <span style="color:#ae81ff">20</span>   <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">252</span>.4m  <span style="color:#ae81ff">62</span>.5m   <span style="color:#ae81ff">2</span>.6m S  <span style="color:#ae81ff">0</span>.0  <span style="color:#ae81ff">3</span>.4   <span style="color:#ae81ff">0</span>:00.00 /tmp/go-build714750418/command-line-arguments/_obj/exe/p
<span style="color:#ae81ff">24758</span> z         <span style="color:#ae81ff">20</span>   <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">252</span>.4m  <span style="color:#ae81ff">62</span>.5m   <span style="color:#ae81ff">2</span>.6m S  <span style="color:#ae81ff">5</span>.3  <span style="color:#ae81ff">3</span>.4   <span style="color:#ae81ff">0</span>:00.41 /tmp/go-build714750418/command-line-arguments/_obj/exe/p
<span style="color:#ae81ff">24759</span> z         <span style="color:#ae81ff">20</span>   <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">252</span>.4m  <span style="color:#ae81ff">62</span>.5m   <span style="color:#ae81ff">2</span>.6m S  <span style="color:#ae81ff">2</span>.0  <span style="color:#ae81ff">3</span>.4   <span style="color:#ae81ff">0</span>:00.12 /tmp/go-build714750418/command-line-arguments/_obj/exe/p
<span style="color:#ae81ff">24760</span> z         <span style="color:#ae81ff">20</span>   <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">252</span>.4m  <span style="color:#ae81ff">62</span>.5m   <span style="color:#ae81ff">2</span>.6m S  <span style="color:#ae81ff">0</span>.0  <span style="color:#ae81ff">3</span>.4   <span style="color:#ae81ff">0</span>:00.00 /tmp/go-build714750418/command-line-arguments/_obj/exe/p
<span style="color:#ae81ff">24761</span> z         <span style="color:#ae81ff">20</span>   <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">252</span>.4m  <span style="color:#ae81ff">62</span>.5m   <span style="color:#ae81ff">2</span>.6m S  <span style="color:#ae81ff">2</span>.7  <span style="color:#ae81ff">3</span>.4   <span style="color:#ae81ff">0</span>:00.10 /tmp/go-build714750418/command-line-arguments/_obj/exe/p
<span style="color:#ae81ff">24762</span> z         <span style="color:#ae81ff">20</span>   <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">252</span>.4m  <span style="color:#ae81ff">62</span>.5m   <span style="color:#ae81ff">2</span>.6m S  <span style="color:#ae81ff">0</span>.0  <span style="color:#ae81ff">3</span>.4   <span style="color:#ae81ff">0</span>:00.11 /tmp/go-build714750418/command-line-arguments/_obj/exe/p
 <span style="color:#ae81ff">1250</span> root      <span style="color:#ae81ff">20</span>   <span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">540</span>.1m  <span style="color:#ae81ff">17</span>.9m   <span style="color:#ae81ff">5</span>.6m S  <span style="color:#ae81ff">0</span>.0  <span style="color:#ae81ff">1</span>.0   <span style="color:#ae81ff">0</span>:00.14 /usr/bin/python -Es /usr/sbin/tuned -l -P</code></pre></div>
<p><em>关注项：</em></p>

<table>
<thead>
<tr>
<th align="center">统计数据</th>
<th align="center">释义</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">5.0 us,  0.3 sy</td>
<td align="center">用户空间占用CPU百分比、内核空间占用CPU百分比</td>
</tr>

<tr>
<td align="center">0.0 ni, 94.7 id</td>
<td align="center">用户进程空间内改变进程优先级占用CPU、空闲CPU百分比</td>
</tr>

<tr>
<td align="center">0.0 wa,  0.0 hi,  0.0 si,  0.0 st</td>
<td align="center">等待 IO 的 CPU 时间百分比，最后三个是中断请求相关</td>
</tr>

<tr>
<td align="center">GiB Mem :    1.793 total,    0.601 free,    0.213 used,    0.979 buff/cache</td>
<td align="center">分别是物理内存总量、空闲内存总量、使用物理内存总量、用作内核缓存内存量(物理内存)</td>
</tr>

<tr>
<td align="center">GiB Swap:    1.969 total,    1.969 free,    0.000 used.    1.106 avail Mem</td>
<td align="center">分别是交换分区量、空闲交换区总量、使用交换分区总量（虚拟内存）、avail / 物理内存</td>
</tr>
</tbody>
</table>

<p><em>The avail number on line 2 is an estimation of physical memory available for starting new applications, without swapping.  Unlike the free field, it attempts to account for readily reclaimable page cache and memory slabs.  It is available  on  kernels  3.14,emulated on kernels 2.6.27+, otherwise the same as free.</em></p>

<p>纳入内核管理的内存不见得都在使用中，还包括过去使用过的现在可以被重复利用的内存，内核并不把这些可被重新使用的内存交还到free中去，因此在linux上free内存会越来越少，但不用为此担心。</p>

<p>可用内存数近似计算公式：free + buffers（Mem） + cached（Swap）</p>

<table>
<thead>
<tr>
<th align="center">统计项</th>
<th align="center">释义</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">us, user</td>
<td align="center">time running un-niced user processes</td>
</tr>

<tr>
<td align="center">sy, system</td>
<td align="center">time running kernel processes</td>
</tr>

<tr>
<td align="center">ni, nice</td>
<td align="center">time running niced user processes</td>
</tr>

<tr>
<td align="center">id, idle</td>
<td align="center">time spent in the kernel idle handler (空闲CPU百分比)</td>
</tr>

<tr>
<td align="center">wa, IO-wait</td>
<td align="center">time waiting for I/O completion (等待 IO 的 CPU 时间百分比)</td>
</tr>

<tr>
<td align="center">hi</td>
<td align="center">time spent servicing hardware interrupts</td>
</tr>

<tr>
<td align="center">si</td>
<td align="center">time spent servicing software interrupts</td>
</tr>

<tr>
<td align="center">st</td>
<td align="center">time stolen from this vm by the hypervisor</td>
</tr>
</tbody>
</table>

<p><em>%us、sy%、%id、和 %wa（用户进程、系统进程、空闲时间和CPU用于等待I/O流执行的时间比例）。这个百分比应该接近于0，高于5%时需要密切关注。</em></p>

<p><em>最后的详细指标：（这里的显示按 H 键显示除了线程情况，默认只显示进程）</em></p>

<ul>
<li>PID：进程的ID</li>
<li>USER：进程所有者</li>
<li>PR：进程的优先级别，越小越优先被执行</li>
<li>NI：nice值。负值表示高优先级，正值表示低优先级</li>
<li>VIRT：进程占用的虚拟内存</li>
<li>RES：进程占用的物理内存</li>
<li>SHR：进程使用的共享内存</li>
<li>S：进程的状态。S 表示休眠，R 表示正在运行，Z 表示僵死状态，N 表示该进程优先值为负数，T 表示进程被挂起（比如被执行 <code>^Z</code> 指令，可以通过 <code>fg</code> 指令重新恢复）</li>
<li>%CPU：进程占用CPU的使用率</li>
<li>%MEM：进程使用的物理内存和总内存的百分比</li>
<li>TIME+：该进程启动后占用的总的CPU时间，即占用CPU使用时间的累加值。</li>
<li>COMMAND：进程启动命令名称</li>
</ul>

<p><em>关于上面的 <code>%CPU</code>：</em></p>

<p>任务所分享的上次屏幕刷新后的CPU运行时间，以全部的CPU时间百分比表示。在一个真正的SMP（多处理器）环境中，如果&rsquo;Irix mode&rsquo;是关闭的，top会在&rsquo;Solaris mode&rsquo;下运行，这里一个任务的cpu使用率将除以全部的CPU数量。你可以用&rsquo;I&rsquo;（大写字母I）这个交互命令触发Irix或Solaris模式。如果单个进程由于某个原因或者其他因素占用率升高，那么他很有可能会以%CPU很高的数字显示在top的第一行。</p>

<p><em><a href="https://help.gnome.org/users/gnome-system-monitor/stable/solaris-mode.html.en">Solaris mode</a>:</em></p>

<p>In a system that has multiple CPUs or cores, processes can use more than one at the same time. It is possible for the % CPU column to display values that total greater than 100% (i.e. 400% in a 4-CPU system). Solaris mode divides the % CPU for each process by the number of CPUs in the system so that the total will be 100%.</p>

<h1 id="top-命令显示字段释义表">top 命令显示字段释义表</h1>

<table>
<thead>
<tr>
<th align="center">统计项</th>
<th align="center">释义</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">PID</td>
<td align="center">Process Id</td>
</tr>

<tr>
<td align="center">PPID</td>
<td align="center">Parent Process Id</td>
</tr>

<tr>
<td align="center">UID</td>
<td align="center">User Id</td>
</tr>

<tr>
<td align="center">USER</td>
<td align="center">User Name</td>
</tr>

<tr>
<td align="center">RUID</td>
<td align="center">Real User Id</td>
</tr>

<tr>
<td align="center">RUSER</td>
<td align="center">Real User Name</td>
</tr>

<tr>
<td align="center">SUID</td>
<td align="center">Saved User Id</td>
</tr>

<tr>
<td align="center">SUSER</td>
<td align="center">Saved User Name</td>
</tr>

<tr>
<td align="center">GID</td>
<td align="center">Group Id</td>
</tr>

<tr>
<td align="center">GROUP</td>
<td align="center">Group Name,The effective group name.</td>
</tr>

<tr>
<td align="center">PGRP</td>
<td align="center">Process Group Id, 为了更好的控制进程（比如 forked 的一些子进程），进程组 ID 就是 这些子进程中第一个成员的 PID（process group leader）</td>
</tr>

<tr>
<td align="center">TTY</td>
<td align="center">Controlling Tty</td>
</tr>

<tr>
<td align="center">TPGID</td>
<td align="center">Tty Process Group Id</td>
</tr>

<tr>
<td align="center">SID</td>
<td align="center">Session Id，类似 PGRP 的概念，通常是当前登录的 shell 进程 ID（因为它 forked 出来一些子进程）</td>
</tr>

<tr>
<td align="center">PR</td>
<td align="center">Priority 如果字段值为 <code>rt</code>，表示该任务在 “实时（real time）调度策略” 下运行，Linux 下这个策略本身有些误导，因为传统操作本身不是抢占式的，但 2.6 内核开始有不同</td>
</tr>

<tr>
<td align="center">NI</td>
<td align="center">Nice Value，负值拥有比正值更高的优先级，而 0 则表示该 nice 值不参与运行优先级调整</td>
</tr>

<tr>
<td align="center">nTH</td>
<td align="center">Number of Threads，与当前进程相关的线程数</td>
</tr>

<tr>
<td align="center">P</td>
<td align="center">Last used CPU (SMP Symmetric multiprocessing，对称多处理)，<code>^Z</code>，<code>fg</code> 指令将进程挂起、恢复，能观察到进程在 CPU 上切换（对 CPU 时间片的竞争同样会触发切换）</td>
</tr>

<tr>
<td align="center">%CPU</td>
<td align="center">CPU Usage，该任务从上次屏幕更新以来所占用的 CPU 时间片占总量的百分比，关注 SMP（H 键切换 Threads 模式） 和 multi-processor（Irix/Solaris 模式）环境 &gt;100% 的情况</td>
</tr>

<tr>
<td align="center">TIME</td>
<td align="center">CPU Time，从任务启动以来所占用的总 CPU 时间（S 键切换 Cumulative/累计 模式，开启时包括了以死亡进程所占用的时间，S 既是命令行选项同样也是交互式界面的选项）</td>
</tr>

<tr>
<td align="center">TIME+</td>
<td align="center">CPU Time, hundredths，与 TIME 意义相同，只不过精度更高（精确到百分之一秒）</td>
</tr>

<tr>
<td align="center">%MEM</td>
<td align="center">Memory Usage (RES)，任务当前占用的物理内存占总内存的百分比</td>
</tr>

<tr>
<td align="center">VIRT</td>
<td align="center">Virtual Memory Size (KiB)</td>
</tr>

<tr>
<td align="center">SWAP</td>
<td align="center">Swapped Size (KiB)，任务地址空间（非常驻部分）</td>
</tr>

<tr>
<td align="center">RES</td>
<td align="center">Resident Memory Size (KiB)，任务当前正使用的非交换物理内存大小（常驻内存大小）</td>
</tr>

<tr>
<td align="center">CODE</td>
<td align="center">Code Size (KiB)，用来执行代码的物理内存大小（Text Resident Set size or TRS）</td>
</tr>

<tr>
<td align="center">DATA</td>
<td align="center">Data + Stack Size (KiB)，除了执行代码之外的物理内存大小（Data Resident Set size or DRS）</td>
</tr>

<tr>
<td align="center">SHR</td>
<td align="center">Shared Memory Size (KiB)，任务可用的共享内存，但不是所有的这些都能被任务使用，这反映了任务能与其他进程共享的内存</td>
</tr>

<tr>
<td align="center">nMaj</td>
<td align="center">Major Page Fault Count，任务相关的 major page faults 计数</td>
</tr>

<tr>
<td align="center">nMin</td>
<td align="center">Minor Page Fault count，任务发生的 minor page faults 计数</td>
</tr>

<tr>
<td align="center">nDRT</td>
<td align="center">Dirty Pages Count，最终被写入辅助存储器后又被更新的内存页计数，在脏页内存对应的物理内存地址被其他虚拟内存页使用之前必须将其写入辅助存储</td>
</tr>

<tr>
<td align="center">S</td>
<td align="center">Process Status，进程状态，这里列举几个不常见的：D = uninterruptible sleep，T = stopped by job control signal，t = stopped by debugger during trace</td>
</tr>

<tr>
<td align="center">COMMAND</td>
<td align="center">Command Name or Command Line，交互模式下 <code>c</code> 按键显示全命令</td>
</tr>

<tr>
<td align="center">WCHAN</td>
<td align="center">Sleeping in Function，依赖于 kernel link map (System.map)，显示当前 sleep 的内核函数的名字或者地址，活动的显示 <code>-</code></td>
</tr>

<tr>
<td align="center">Flags</td>
<td align="center">Task Flags，代表任务当前调度的 flags（定义参见 Linux/sched.h）</td>
</tr>

<tr>
<td align="center">CGROUPS</td>
<td align="center">Control Groups，进程当前所属的 Cgroup 名称，如果对当前进程不适用则显示 <code>-</code></td>
</tr>

<tr>
<td align="center">SUPGIDS</td>
<td align="center">Supplementary Group IDs，当登录时建立的补充组 ID，或者从父进程继承而来的补充组 ID</td>
</tr>

<tr>
<td align="center">SUPGRPS</td>
<td align="center">Supplementary Group Names，补充组名字</td>
</tr>

<tr>
<td align="center">TGID</td>
<td align="center">Thread Group Id，当前进程所属的线程组 ID</td>
</tr>

<tr>
<td align="center">ENVIRON</td>
<td align="center">Environment variables，各自进程所见的环境变量</td>
</tr>

<tr>
<td align="center">vMj</td>
<td align="center">Major Page Fault Count Delta，自从上次更新以来所发生的大页错误数</td>
</tr>

<tr>
<td align="center">vMn</td>
<td align="center">Minor Page Fault Count Delta，自从上次更新以来所发生的小页错误数</td>
</tr>

<tr>
<td align="center">USED</td>
<td align="center">Memory in Use (Res+Swap Size / KiB)，进程所使用的非交换物理内存（RES）与非常驻地址空间（SWAP）之和</td>
</tr>

<tr>
<td align="center">nsIPC</td>
<td align="center">IPC namespace，用来隔离进程间通信资源（System V IPC 和 POSIX message queues）的命名空间索引节点</td>
</tr>

<tr>
<td align="center">nsMNT</td>
<td align="center">MNT namespace，用来隔离文件系统挂载点从而提供不同文件系统结构层次试图的命名空间索引节点</td>
</tr>

<tr>
<td align="center">nsNET</td>
<td align="center">NET namespace，用来隔离像网络设备、IP 地址、IP 路由规则、端口号等资源的命名空间索引节点</td>
</tr>

<tr>
<td align="center">nsPID</td>
<td align="center">PID namespace，隔离进程 ID 的命名空间索引节点，意味着不要求进程ID是独一无二的；因此每个命名空间可以有自己的<code>init</code>进程（PID 1）来进行初始化和回收孤立的子进程</td>
</tr>

<tr>
<td align="center">nsUSER</td>
<td align="center">USER namespace，隔离用户和属组 ID 的命名空间索引节点，因此进程可以在一个用户命名空间之外有一个非特权账号，而在之内有一个 UID 为 0 的特权 root 账号</td>
</tr>

<tr>
<td align="center">nsUTS</td>
<td align="center">UTS namespace，隔离主机名和 NIS 域名的命名空间索引节点，UTS 简单意思为 &ldquo;UNIX Time-sharing System&rdquo;</td>
</tr>
</tbody>
</table>

<p>相关概念：
<a href="https://zh.wikipedia.org/wiki/%E5%AF%B9%E7%A7%B0%E5%A4%9A%E5%A4%84%E7%90%86">对称多处理</a>
A page fault occurs when a process attempts to read from or write to a virtual page that is not currently present in its address space.  A major page fault is when auxiliary  storage  access
           is involved in making that page available.
           A minor page fault does not involve auxiliary storage
           access in making that page available.
           Dirty pages must be written to auxiliary storage before the corresponding physical memory location can be used for some other virtual page.</p>

<h1 id="top-pids">top pids</h1>

<p><img src="http://i.idevz.org/top-kill.png-origin" alt="top pids" /></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">❯ kill -9 <span style="color:#ae81ff">30826</span>                                                                                                              z@master1</code></pre></div>
<h1 id="difference-between-buffer-and-cache-网站摘录-http-www-answers-com-q-difference-between-buffer-and-cache">Difference between buffer and cache? <a href="http://www.answers.com/Q/Difference_between_buffer_and_cache">网站摘录</a></h1>

<h2 id="buffer">Buffer</h2>

<blockquote>
<p>A data area, shared by hardware devices or program a process is called buffer. They are operated at different speeds or with different sets of priorities. The buffer allows each device or process to operate without holding up by the other. In order to a buffer to be effective, the size of the buffer needs to be considered by the buffer designer. Like a cache, a buffer is a &ldquo;midpoint holding place&rdquo; but does not exist so much to accelerate the speed of an activity as for supporting the coordination of separate activities.
This term is used not only in programming but in hardware as well. In programming, buffering sometimes needs to screen data from its final intended place so that it can be edited or processed before moving to a regular file or database.</p>
</blockquote>

<h2 id="cache-memory">Cache Memory</h2>

<blockquote>
<p>Cache memory is type of random access memory (RAM). Cache Memory can be accessed more quickly by the computer microprocessor than it can be accessed by regular RAM. Like microprocessor processes data, it looks first in the cache memory and if there, it finds the data from a previous reading of data, it does not need to do the more time consuming reading of data from larger memory.</p>

<p>Sometimes Cache memory is described in levels of closeness and convenience to the microprocessor. An L1 cache is on the same chip like the microprocessors.</p>

<p>In addition to cache memory, RAM itself is a cache memory for hard disk storage since all of RAM&rsquo;s contents come up to the hard disk initially when you turn on your computer and load the operating system that you are loading it into RAM and later when you start new applications and access new data. RAM also contains a special area called a disk cache that consists of the data most recently read in from the hard disk.</p>
</blockquote>

</div>

  
<footer class='entry-footer'>
  <div class='container sep-before'><div class='categories'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M22,19a2,2,0,0,1-2,2H4a2,2,0,0,1-2-2V5A2,2,0,0,1,4,3H9l2,3h9a2,2,0,0,1,2,2Z"/>
  
</svg>
<span class='screen-reader-text'>Categories: </span><a class='category' href='http://idevz.github.io/categories/%E5%B7%A5%E5%85%B7/'>工具</a>, <a class='category' href='http://idevz.github.io/categories/top/'>top</a></div>
<div class='tags'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M20.59,13.41l-7.17,7.17a2,2,0,0,1-2.83,0L2,12V2H12l8.59,8.59A2,2,0,0,1,20.59,13.41Z"/>
  <line x1="7" y1="7" x2="7" y2="7"/>
  
</svg>
<span class='screen-reader-text'>Tags: </span><a class='tag' href='http://idevz.github.io/tags/top/'>top</a></div>

  </div>
</footer>


</article>

<nav class='entry-nav'>
  <div class='container'><div class='prev-entry sep-before'>
      <a href='http://idevz.github.io/2017/11/mac-osx-vscode-gdb-%E8%B0%83%E8%AF%95%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/'>
        <span aria-hidden='true'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="20" y1="12" x2="4" y2="12"/>
  <polyline points="10 18 4 12 10 6"/>
  
</svg>
 Previous</span>
        <span class='screen-reader-text'>Previous post: </span>Mac OSX Vscode GDB 调试环境搭建</a>
    </div></div>
</nav>




      </main>

      <footer id='footer' class='footer'>
        <div class='container sep-before'><div class='copyright'>
  <p>© 2020 idevz.org</p>
</div>

        </div>
      </footer>

    </div>
  </div><script>window.__assets_js_src="http://idevz.github.io/assets/js/"</script>

<script src='http://idevz.github.io/assets/js/main.67d669ac.js'></script>

</body>

</html>

