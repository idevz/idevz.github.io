<!DOCTYPE html>
<html lang='en'><head>
  <meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='description' content='使用 PHP-CS-Fixer 自动规范化你的 PHP 代码 https://laravel-china.org/topics/547/use-php-cs-fixer-to-automatically-standardize-your-php-code
PHPCS
安装
有以下方式安装 PHPCS:
使用 composer:
composer global require &ldquo;squizlabs/php_codesniffer=*&rdquo; 注意，你可能需要将 ~/.composer/vendor/bin/ 添加到 PATH 环境变量中，否则会报命令找不到。 使用 PEAR:
pear install PHP_CodeSniffer 下载安装：
curl -OL https://squizlabs.github.io/PHP_CodeSniffer/phpcs.phar php phpcs.phar -h curl -OL https://squizlabs.github.io/PHP_CodeSniffer/phpcbf.phar php phpcbf.phar -h 然后移动到命令目录：
mv phpcs.phar /usr/bin/phpcs mv phpcbf.phar /usr/bin/phpcbf // 也许上面需要 sudo chmod &#43;x /usr/bin/phpcs chmod &#43;x /usr/bin/phpcbf 这里的 phpcbf 是代码修复工具。
使用
查看帮助：
phpcs &ndash;help 添加标准：
phpcs &ndash;config-set installed_paths PATH_TO_SEARCH_STANDARDS 注意：假设标准为 Weibo, 目录为:'>
<meta name='theme-color' content='#ffcd00'>

<meta property='og:title' content='cs md fixer • 做一个善于思考的学习者'>
<meta property='og:description' content='使用 PHP-CS-Fixer 自动规范化你的 PHP 代码 https://laravel-china.org/topics/547/use-php-cs-fixer-to-automatically-standardize-your-php-code
PHPCS
安装
有以下方式安装 PHPCS:
使用 composer:
composer global require &ldquo;squizlabs/php_codesniffer=*&rdquo; 注意，你可能需要将 ~/.composer/vendor/bin/ 添加到 PATH 环境变量中，否则会报命令找不到。 使用 PEAR:
pear install PHP_CodeSniffer 下载安装：
curl -OL https://squizlabs.github.io/PHP_CodeSniffer/phpcs.phar php phpcs.phar -h curl -OL https://squizlabs.github.io/PHP_CodeSniffer/phpcbf.phar php phpcbf.phar -h 然后移动到命令目录：
mv phpcs.phar /usr/bin/phpcs mv phpcbf.phar /usr/bin/phpcbf // 也许上面需要 sudo chmod &#43;x /usr/bin/phpcs chmod &#43;x /usr/bin/phpcbf 这里的 phpcbf 是代码修复工具。
使用
查看帮助：
phpcs &ndash;help 添加标准：
phpcs &ndash;config-set installed_paths PATH_TO_SEARCH_STANDARDS 注意：假设标准为 Weibo, 目录为:'>
<meta property='og:url' content='http://idevz.github.io/2017/07/cs-md-fixer/'>
<meta property='og:site_name' content='做一个善于思考的学习者'>
<meta property='og:type' content='article'><meta property='article:section' content='tech'><meta property='article:tag' content='代码规范'><meta property='article:tag' content='质量检查'><meta property='article:tag' content='代码质量'><meta property='article:published_time' content='2017-07-10T16:13:41&#43;08:00'/><meta property='article:modified_time' content='2018-04-16T08:00:33&#43;08:00'/><meta name='twitter:card' content='summary'>

<meta name="generator" content="Hugo 0.60.0-DEV" />

  <title>cs md fixer • 做一个善于思考的学习者</title>
  <link rel='canonical' href='http://idevz.github.io/2017/07/cs-md-fixer/'>
  
  
  <link rel='icon' href='http://idevz.github.io/favicon.ico'>
<link rel='stylesheet' href='http://idevz.github.io/assets/css/main.6a060eb7.css'><style>
:root{--color-accent:#ffcd00;}
</style>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-71947507-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  

</head>
<body class='page type-tech'>

  <div class='site'><a class='screen-reader-text' href='#content'>Skip to Content</a><div class='main'><nav id='main-menu' class='menu main-menu' aria-label='Main Menu'>
  <div class='container'>
    
    <ul><li class='item'>
        <a href='http://idevz.github.io/'>idevz.org</a>
      </li><li class='item'>
        <a href='http://idevz.github.io/tech/'>技术</a>
      </li><li class='item'>
        <a href='http://idevz.github.io/tools/'>工具</a>
      </li><li class='item'>
        <a href='http://idevz.github.io/life/'>Life</a>
      </li><li class='item'>
        <a href='http://idevz.github.io/page/about/'>关于</a>
      </li></ul>
  </div>
</nav><div class='header-widgets'>
        <div class='container'></div>
      </div>

      <header id='header' class='header site-header'>
        <div class='container sep-after'>
          <div class='header-info'><p class='site-title title'>做一个善于思考的学习者</p><p class='desc site-desc'>Every Day Create Your History.</p>
          </div>
        </div>
      </header>

      <main id='content'>


<article lang='en' class='entry'>
  <header class='header entry-header'>
  <div class='container sep-after'>
    <div class='header-info'>
      <h1 class='title'>cs md fixer</h1>
      

    </div>
    <div class='entry-meta'>
  <span class='posted-on'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
  <line x1="16" y1="2" x2="16" y2="6"/>
  <line x1="8" y1="2" x2="8" y2="6"/>
  <line x1="3" y1="10" x2="21" y2="10"/>
  
</svg>
<span class='screen-reader-text'>Posted on </span>
  <time class='entry-date' datetime='2017-07-10T16:13:41&#43;08:00'>2017, Jul 10</time>
</span>

  
  
<span class='reading-time'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <circle cx="12" cy="12" r="10"/>
  <polyline points="12 6 12 12 15 15"/>
  
</svg>
One min read
</span>


</div>


  </div>
</header>

  
  

  <div class='container entry-content'>
  

<p>使用 PHP-CS-Fixer 自动规范化你的 PHP 代码
<a href="https://laravel-china.org/topics/547/use-php-cs-fixer-to-automatically-standardize-your-php-code">https://laravel-china.org/topics/547/use-php-cs-fixer-to-automatically-standardize-your-php-code</a></p>

<p>PHPCS</p>

<p>安装</p>

<p>有以下方式安装 PHPCS:</p>

<p>使用 composer:</p>

<p>composer global require &ldquo;squizlabs/php_codesniffer=*&rdquo;
注意，你可能需要将 ~/.composer/vendor/bin/ 添加到 PATH 环境变量中，否则会报命令找不到。
使用 PEAR:</p>

<p>pear install PHP_CodeSniffer
下载安装：</p>

<p>curl -OL <a href="https://squizlabs.github.io/PHP_CodeSniffer/phpcs.phar">https://squizlabs.github.io/PHP_CodeSniffer/phpcs.phar</a>
php phpcs.phar -h
curl -OL <a href="https://squizlabs.github.io/PHP_CodeSniffer/phpcbf.phar">https://squizlabs.github.io/PHP_CodeSniffer/phpcbf.phar</a>
php phpcbf.phar -h
然后移动到命令目录：</p>

<p>mv phpcs.phar /usr/bin/phpcs
mv phpcbf.phar /usr/bin/phpcbf
// 也许上面需要 sudo
chmod +x /usr/bin/phpcs
chmod +x /usr/bin/phpcbf
这里的 phpcbf 是代码修复工具。</p>

<p>使用</p>

<p>查看帮助：</p>

<p>phpcs &ndash;help
添加标准：</p>

<p>phpcs &ndash;config-set installed_paths PATH_TO_SEARCH_STANDARDS
注意：假设标准为 Weibo, 目录为:</p>

<p>/Users/overtrue/code_standards/Weibo
其中Weibo 里才是 ruleset.xml，那么对应上面的 PATH_TO_SEARCH_STANDARDS 应该为：</p>

<p>phpcs &ndash;config-set installed_paths /Users/overtrue/code_standards
查看已经安装的标准：</p>

<p>phpcs -i
查看配置：</p>

<p>phpcs &ndash;config-show
检查代码规范：</p>

<p>phpcs ./codes/Example.php
// or
phpcs ./codes/
指定标准：</p>

<p>phpcs ./codes/Example.php &ndash;standard=PSR2
报告格式：</p>

<p>phpcs &ndash;report=summary /path/to/code
可用的格式有（默认为: full）：</p>

<p>full, xml, checkstyle, csv
json, emacs, source, summary, diff
svnblame, gitblame, hgblame or notifysend
修复代码</p>

<p>第一种：使用 diff 形式打补丁：</p>

<p>phpcs &ndash;report-diff=/path/to/changes.diff /path/to/code
patch -p0 -ui /path/to/changes.diff</p>

<h1 id="patching-file-path-to-code-file-php">patching file /path/to/code/file.php</h1>

<p>第二种：使用 PHP Code Beautifier 和 Fixer：</p>

<p>phpcbf /path/to/code
以上命令会自动修复原文件，如果不想直接覆盖原文件，可以使用 &ndash;suffix 指定修复后的代码后缀：</p>

<p>phpcs /path/to/code &ndash;suffix=.fixed
更多 PHPCS 的使用请参考：<a href="https://github.com/squizlabs/PHP_CodeSniffer/wiki">https://github.com/squizlabs/PHP_CodeSniffer/wiki</a></p>

<p>PHPMD</p>

<p>安装</p>

<p>同样有以下安装方式：</p>

<p>下载 phar 文件安装：</p>

<p>wget -c <a href="http://static.phpmd.org/php/latest/phpmd.phar">http://static.phpmd.org/php/latest/phpmd.phar</a>
mv phpmd.phar /usr/bin/phpmd
chmod +x /usr/bin/phpmd
使用 Composer 安装：</p>

<p>composer global require phpmd/phpmd
使用</p>

<p>检查代码质量：</p>

<h1 id="phpmd-代码路径-报告格式">phpmd 代码路径 报告格式</h1>

<p>phpmd /path/to/source text
或者指定要检查的规则：</p>

<h1 id="phpmd-代码路径-报告格式-规则列表">phpmd 代码路径 报告格式 规则列表</h1>

<p>phpmd /path/to/source text codesize,unusedcode,naming
或者使用xml指定检查规则：</p>

<h1 id="phpmd-代码路径-报告格式-规则xml文件">phpmd 代码路径 报告格式 规则xml文件</h1>

<p>phpmd /path/to/source text /phpmd_ruleset.xml
报告格式有：
xml, 以 XML 格式输出；
text, 简单的文本格式；
html, 输出到单个的html；
这里有一个phpmd规则可参考：<a href="https://github.com/overtrue/phpmd-rulesets">https://github.com/overtrue/phpmd-rulesets</a></p>

<p>更多关于 PHPMD 的使用请参考：<a href="http://phpmd.org/documentation/index.html">http://phpmd.org/documentation/index.html</a></p>

</div>

  
<footer class='entry-footer'>
  <div class='container sep-before'><div class='categories'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M22,19a2,2,0,0,1-2,2H4a2,2,0,0,1-2-2V5A2,2,0,0,1,4,3H9l2,3h9a2,2,0,0,1,2,2Z"/>
  
</svg>
<span class='screen-reader-text'>Categories: </span><a class='category' href='http://idevz.github.io/categories/php/'>PHP</a>, <a class='category' href='http://idevz.github.io/categories/%E6%8A%80%E6%9C%AF/'>技术</a></div>
<div class='tags'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M20.59,13.41l-7.17,7.17a2,2,0,0,1-2.83,0L2,12V2H12l8.59,8.59A2,2,0,0,1,20.59,13.41Z"/>
  <line x1="7" y1="7" x2="7" y2="7"/>
  
</svg>
<span class='screen-reader-text'>Tags: </span><a class='tag' href='http://idevz.github.io/tags/%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/'>代码规范</a>, <a class='tag' href='http://idevz.github.io/tags/%E8%B4%A8%E9%87%8F%E6%A3%80%E6%9F%A5/'>质量检查</a>, <a class='tag' href='http://idevz.github.io/tags/%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F/'>代码质量</a></div>

  </div>
</footer>


</article>

<nav class='entry-nav'>
  <div class='container'><div class='prev-entry sep-before'>
      <a href='http://idevz.github.io/2017/07/%E5%A6%82%E4%BD%95%E5%BF%AB%E9%80%9F%E5%AD%A6%E4%B9%A0%E4%B8%80%E4%B8%AA%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE/'>
        <span aria-hidden='true'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="20" y1="12" x2="4" y2="12"/>
  <polyline points="10 18 4 12 10 6"/>
  
</svg>
 Previous</span>
        <span class='screen-reader-text'>Previous post: </span>如何快速学习一个开源项目</a>
    </div><div class='next-entry sep-before'>
      <a href='http://idevz.github.io/2017/07/fig/'>
        <span class='screen-reader-text'>Next post: </span>fig<span aria-hidden='true'>Next <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="4" y1="12" x2="20" y2="12"/>
  <polyline points="14 6 20 12 14 18"/>
  
</svg>
</span>
      </a>
    </div></div>
</nav>




      </main>

      <footer id='footer' class='footer'>
        <div class='container sep-before'><div class='copyright'>
  <p>© 2020 idevz.org</p>
</div>

        </div>
      </footer>

    </div>
  </div><script>window.__assets_js_src="http://idevz.github.io/assets/js/"</script>

<script src='http://idevz.github.io/assets/js/main.67d669ac.js'></script>

</body>

</html>

